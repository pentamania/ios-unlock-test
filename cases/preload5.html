<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>iOSアンロックテスト - ページ読み込みと同時にロード、タップイベントに無音再生＆非同期処理をはさんで再生</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.min.css">
  </head>
  <body>
    <h2>ページ読み込みと同時にロード、タップイベントに無音再生＆非同期処理をはさんで再生</h2>
    <ul>
      <li>iOS： 画面タップ（クリック）で再生</li>
      <li>Google Chrome 71+, MS Edge(新)などのChromium系ブラウザ： 画面タップ（クリック）で再生</li>
      <li>Firefox, MS Edge(旧), etc.： 画面タップ（クリック）で再生</li>
    </ul>
    <script src="../shared/wa.js"></script>
    <script type="text/javascript">
    window.onload = function() {
      // ページ読み込みと同時にロード
      wa.loadFile('../shared/sample.mp3', function(buffer) {

        // ユーザーイベント
        var event = 'click';
        document.addEventListener(event, function() {
          wa.playSilent();

          // 非同期処理
          wa.loadFile('../shared/sample.mp3', function() {
            wa.play('sample.mp3');
          });
        });
      });
    }
    </script>
  </body>
</html>